<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Master</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
        }

        .container {
            text-align: center;
            padding: 20px;
            max-width: 600px;
            width: 100%;
        }

        .front-page {
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            font-size: 4em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite alternate;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        @keyframes glow {
            from { filter: drop-shadow(0 2px 8px rgba(102, 126, 234, 0.3)); }
            to { filter: drop-shadow(0 4px 16px rgba(118, 75, 162, 0.5)); }
        }

        .subtitle {
            color: #5a6c7d;
            font-size: 1.2em;
            margin-bottom: 50px;
            letter-spacing: 2px;
        }

        .level-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .level-btn {
            background: linear-gradient(135deg, #ffffff 0%, #f0f4f8 100%);
            border: 2px solid #667eea;
            color: #2d3748;
            padding: 30px 20px;
            font-size: 1.2em;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .level-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.15);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .level-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .level-btn:hover {
            transform: translateY(-5px);
            border-color: #764ba2;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .level-btn span {
            position: relative;
            z-index: 1;
        }

        .difficulty-label {
            display: block;
            font-size: 0.8em;
            color: #718096;
            margin-top: 5px;
        }

        .game-page {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .game-info {
            color: #667eea;
            font-size: 1.2em;
            font-weight: bold;
        }

        .back-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%);
            border: none;
            color: white;
            padding: 10px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .sudoku-grid {
            display: grid;
            gap: 0;
            background: #2d3748;
            padding: 4px;
            border-radius: 10px;
            margin: 20px auto;
            width: fit-content;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            border: 3px solid #2d3748;
        }

        .sudoku-grid.size-9 {
            grid-template-columns: repeat(9, 50px);
            gap: 1px;
        }

        .sudoku-grid.size-4 {
            grid-template-columns: repeat(4, 65px);
            gap: 1px;
        }

        .sudoku-grid.size-16 {
            grid-template-columns: repeat(16, 35px);
            gap: 1px;
        }

        .sudoku-cell {
            width: 50px;
            height: 50px;
            background: #ffffff;
            border: 1px solid #cbd5e0;
            color: #2d3748;
            font-size: 1.4em;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Define thick borders for 3x3 boxes in 9x9 grid */
        .sudoku-grid.size-9 .sudoku-cell:nth-child(9n+3),
        .sudoku-grid.size-9 .sudoku-cell:nth-child(9n+6) {
            border-right: 3px solid #2d3748;
        }

        .sudoku-grid.size-9 .sudoku-cell:nth-child(n+19):nth-child(-n+27),
        .sudoku-grid.size-9 .sudoku-cell:nth-child(n+46):nth-child(-n+54) {
            border-bottom: 3px solid #2d3748;
        }

        /* Define thick borders for 2x2 boxes in 4x4 grid */
        .sudoku-grid.size-4 .sudoku-cell:nth-child(4n+2) {
            border-right: 3px solid #2d3748;
        }

        .sudoku-grid.size-4 .sudoku-cell:nth-child(n+5):nth-child(-n+8) {
            border-bottom: 3px solid #2d3748;
        }

        .sudoku-grid.size-4 .sudoku-cell {
            width: 65px;
            height: 65px;
            font-size: 1.6em;
        }

        .sudoku-grid.size-16 .sudoku-cell {
            width: 35px;
            height: 35px;
            font-size: 0.95em;
        }

        /* Define thick borders for 4x4 boxes in 16x16 grid */
        .sudoku-grid.size-16 .sudoku-cell:nth-child(16n+4),
        .sudoku-grid.size-16 .sudoku-cell:nth-child(16n+8),
        .sudoku-grid.size-16 .sudoku-cell:nth-child(16n+12) {
            border-right: 3px solid #2d3748;
        }

        .sudoku-grid.size-16 .sudoku-cell:nth-child(n+49):nth-child(-n+64),
        .sudoku-grid.size-16 .sudoku-cell:nth-child(n+113):nth-child(-n+128),
        .sudoku-grid.size-16 .sudoku-cell:nth-child(n+177):nth-child(-n+192) {
            border-bottom: 3px solid #2d3748;
        }

        .sudoku-cell:hover:not(.fixed):not(.incorrect) {
            background: #edf2f7;
            transform: scale(1.05);
        }

        .sudoku-cell.fixed {
            background: #e6f2ff;
            color: #667eea;
            font-weight: bold;
            cursor: default;
        }

        .sudoku-cell.selected {
            background: #bee3f8;
            transform: scale(1.05);
            box-shadow: 0 0 0 3px #667eea inset;
        }

        .sudoku-cell.incorrect {
            background: #fed7d7;
            color: #c53030;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .number-pad {
            display: grid;
            gap: 10px;
            margin-top: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .number-pad.size-9 {
            grid-template-columns: repeat(5, 1fr);
        }

        .number-pad.size-16 {
            grid-template-columns: repeat(8, 1fr);
        }

        .number-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 12px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .number-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.5);
        }

        .number-btn:active {
            transform: translateY(0);
        }

        .controls {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(135deg, #20bf6b 0%, #0e9f4f 100%);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(32, 191, 107, 0.4);
        }

        .victory-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease-in;
            z-index: 1000;
        }

        .victory-content {
            background: linear-gradient(135deg, #ffffff 0%, #f7fafc 100%);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            border: 2px solid #667eea;
            animation: scaleIn 0.5s ease-out;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }

        @keyframes scaleIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .victory-content h2 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .victory-content p {
            color: #4a5568;
            font-size: 1.2em;
            margin-bottom: 30px;
        }

        @media (max-width: 600px) {
            h1 { font-size: 2.5em; }
            .level-grid { grid-template-columns: 1fr; }
            .sudoku-cell { width: 35px; height: 35px; font-size: 1.1em; }
            .sudoku-grid.size-9 { grid-template-columns: repeat(9, 35px); }
            .sudoku-grid.size-4 .sudoku-cell { width: 50px; height: 50px; }
            .sudoku-grid.size-4 { grid-template-columns: repeat(4, 50px); }
            .sudoku-grid.size-16 { grid-template-columns: repeat(16, 25px); }
            .sudoku-grid.size-16 .sudoku-cell { width: 25px; height: 25px; font-size: 0.75em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="front-page" id="frontPage">
            <h1>SUDOKU</h1>
            <p class="subtitle">MASTER</p>
            <div class="level-grid">
                <button class="level-btn" onclick="startGame('easy')">
                    <span>EASY<span class="difficulty-label">Beginner Friendly</span></span>
                </button>
                <button class="level-btn" onclick="startGame('intermediate')">
                    <span>INTERMEDIATE<span class="difficulty-label">Moderate Challenge</span></span>
                </button>
                <button class="level-btn" onclick="startGame('difficult')">
                    <span>DIFFICULT<span class="difficulty-label">Expert Level</span></span>
                </button>
                <button class="level-btn" onclick="startGame('extreme')">
                    <span>EXTREME<span class="difficulty-label">Master Level</span></span>
                </button>
                <button class="level-btn" onclick="startGame('legend')">
                    <span>LEGEND<span class="difficulty-label">Ultimate Test</span></span>
                </button>
                <button class="level-btn" onclick="startGame('16x16')">
                    <span>16√ó16 SUDOKU<span class="difficulty-label">Ultimate Challenge</span></span>
                </button>
            </div>
        </div>

        <div class="game-page" id="gamePage">
            <div class="game-header">
                <div class="game-info" id="gameInfo">EASY</div>
                <button class="back-btn" onclick="goBack()">‚Üê BACK</button>
            </div>
            <div id="sudokuGrid" class="sudoku-grid"></div>
            <div class="number-pad" id="numberPad"></div>
            <div class="controls">
                <button class="control-btn" onclick="clearCell()">CLEAR</button>
                <button class="control-btn" onclick="checkSolution()">CHECK</button>
                <button class="control-btn" onclick="resetGame()">RESET</button>
            </div>
        </div>

        <div class="victory-modal" id="victoryModal">
            <div class="victory-content">
                <h2>üéâ VICTORY! üéâ</h2>
                <p>Congratulations! You've solved the puzzle!</p>
                <button class="control-btn" onclick="goBack()">PLAY AGAIN</button>
            </div>
        </div>
    </div>

    <script>
        let currentLevel = '';
        let gridSize = 9;
        let selectedCell = null;
        let puzzle = [];
        let solution = [];
        let userGrid = [];
        const symbols16 = ['1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G'];

        function startGame(level) {
            currentLevel = level;
            document.getElementById('frontPage').style.display = 'none';
            document.getElementById('gamePage').style.display = 'block';
            document.getElementById('gameInfo').textContent = level.toUpperCase();
            
            if (level === '4x4') {
                gridSize = 4;
                generatePuzzle4x4();
            } else if (level === '16x16') {
                gridSize = 16;
                generatePuzzle16x16();
            } else {
                gridSize = 9;
                generatePuzzle9x9(level);
            }
            
            renderGrid();
            renderNumberPad();
        }

        function goBack() {
            document.getElementById('frontPage').style.display = 'block';
            document.getElementById('gamePage').style.display = 'none';
            document.getElementById('victoryModal').style.display = 'none';
            selectedCell = null;
        }

        function generatePuzzle9x9(level) {
            const base = 3;
            const side = base * base;
            
            function pattern(r, c) { return (base * (r % base) + Math.floor(r / base) + c) % side; }
            function shuffle(s) { return s.sort(() => Math.random() - 0.5); }
            
            const rBase = [...Array(base).keys()];
            const rows = [];
            for (let g of shuffle(rBase)) {
                for (let r of shuffle([...Array(base).keys()])) {
                    rows.push(g * base + r);
                }
            }
            
            const cols = [];
            for (let g of shuffle(rBase)) {
                for (let c of shuffle([...Array(base).keys()])) {
                    cols.push(g * base + c);
                }
            }
            
            const nums = shuffle([...Array(side).keys()].map(i => i + 1));
            
            solution = rows.map(r => cols.map(c => nums[pattern(r, c)]));
            
            const clues = {
                'easy': 45,
                'intermediate': 35,
                'difficult': 30,
                'extreme': 25,
                'legend': 22
            };
            
            puzzle = solution.map(row => [...row]);
            userGrid = solution.map(row => [...row]);
            
            const positions = [];
            for (let i = 0; i < side; i++) {
                for (let j = 0; j < side; j++) {
                    positions.push([i, j]);
                }
            }
            
            shuffle(positions);
            const toRemove = side * side - clues[level];
            
            for (let i = 0; i < toRemove; i++) {
                const [r, c] = positions[i];
                puzzle[r][c] = 0;
                userGrid[r][c] = 0;
            }
        }

        function isValidPlacement(grid, row, col, num) {
            // Check row
            for (let x = 0; x < gridSize; x++) {
                if (x !== col && grid[row][x] === num) return false;
            }
            
            // Check column
            for (let x = 0; x < gridSize; x++) {
                if (x !== row && grid[x][col] === num) return false;
            }
            
            // Check box
            const boxSize = Math.sqrt(gridSize);
            const boxRow = Math.floor(row / boxSize) * boxSize;
            const boxCol = Math.floor(col / boxSize) * boxSize;
            for (let i = 0; i < boxSize; i++) {
                for (let j = 0; j < boxSize; j++) {
                    const r = boxRow + i;
                    const c = boxCol + j;
                    if ((r !== row || c !== col) && grid[r][c] === num) return false;
                }
            }
            
            // Check main diagonal (top-left to bottom-right)
            if (row === col) {
                for (let i = 0; i < gridSize; i++) {
                    if (i !== row && grid[i][i] === num) return false;
                }
            }
            
            // Check anti-diagonal (top-right to bottom-left)
            if (row + col === gridSize - 1) {
                for (let i = 0; i < gridSize; i++) {
                    if (i !== row && grid[i][gridSize - 1 - i] === num) return false;
                }
            }
            
            return true;
        }

        function generatePuzzle16x16() {
            // Create a valid 16x16 sudoku solution
            const base = 4;
            const side = 16;
            
            function pattern(r, c) { return (base * (r % base) + Math.floor(r / base) + c) % side; }
            function shuffle(s) { return s.sort(() => Math.random() - 0.5); }
            
            const rBase = [...Array(base).keys()];
            const rows = [];
            for (let g of shuffle(rBase)) {
                for (let r of shuffle([...Array(base).keys()])) {
                    rows.push(g * base + r);
                }
            }
            
            const cols = [];
            for (let g of shuffle(rBase)) {
                for (let c of shuffle([...Array(base).keys()])) {
                    cols.push(g * base + c);
                }
            }
            
            const nums = shuffle([...Array(side).keys()].map(i => i + 1));
            
            solution = rows.map(r => cols.map(c => nums[pattern(r, c)]));
            
            // Remove cells to create puzzle - keep about 96 clues for 16x16 (moderate difficulty)
            puzzle = solution.map(row => [...row]);
            userGrid = solution.map(row => [...row]);
            
            const positions = [];
            for (let i = 0; i < side; i++) {
                for (let j = 0; j < side; j++) {
                    positions.push([i, j]);
                }
            }
            
            shuffle(positions);
            const toRemove = side * side - 96; // Leave 96 clues
            
            for (let i = 0; i < toRemove; i++) {
                const [r, c] = positions[i];
                puzzle[r][c] = 0;
                userGrid[r][c] = 0;
            }
        }

        function generatePuzzle4x4() {
            solution = [
                [1, 2, 3, 4],
                [3, 4, 1, 2],
                [2, 1, 4, 3],
                [4, 3, 2, 1]
            ];
            
            const variations = [
                [[1,2,3,4],[3,4,1,2],[2,1,4,3],[4,3,2,1]],
                [[2,3,4,1],[4,1,2,3],[1,4,3,2],[3,2,1,4]],
                [[3,4,1,2],[1,2,3,4],[4,3,2,1],[2,1,4,3]]
            ];
            
            solution = variations[Math.floor(Math.random() * variations.length)];
            puzzle = solution.map(row => [...row]);
            userGrid = solution.map(row => [...row]);
            
            const positions = [[0,0],[0,1],[0,2],[0,3],[1,0],[1,1],[1,2],[1,3],
                             [2,0],[2,1],[2,2],[2,3],[3,0],[3,1],[3,2],[3,3]];
            
            for (let i = positions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [positions[i], positions[j]] = [positions[j], positions[i]];
            }
            
            for (let i = 0; i < 8; i++) {
                const [r, c] = positions[i];
                puzzle[r][c] = 0;
                userGrid[r][c] = 0;
            }
        }

        function renderGrid() {
            const grid = document.getElementById('sudokuGrid');
            grid.innerHTML = '';
            grid.className = `sudoku-grid size-${gridSize}`;
            
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'sudoku-cell';
                    
                    const cellValue = puzzle[i][j];
                    const userValue = userGrid[i][j];
                    
                    if (cellValue !== 0) {
                        cell.textContent = gridSize === 16 ? symbols16[cellValue - 1] : cellValue;
                        cell.classList.add('fixed');
                    } else if (userValue !== 0) {
                        cell.textContent = gridSize === 16 ? symbols16[userValue - 1] : userValue;
                    }
                    
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    cell.onclick = () => selectCell(i, j);
                    grid.appendChild(cell);
                }
            }
        }

        function selectCell(row, col) {
            if (puzzle[row][col] !== 0) return;
            
            document.querySelectorAll('.sudoku-cell').forEach(c => c.classList.remove('selected'));
            const cells = document.querySelectorAll('.sudoku-cell');
            const index = row * gridSize + col;
            cells[index].classList.add('selected');
            selectedCell = { row, col };
        }

        function renderNumberPad() {
            const pad = document.getElementById('numberPad');
            pad.innerHTML = '';
            pad.className = `number-pad size-${gridSize}`;
            
            if (gridSize === 16) {
                // For 16x16, show symbols 1-9, A-G
                symbols16.forEach((symbol, index) => {
                    const btn = document.createElement('button');
                    btn.className = 'number-btn';
                    btn.textContent = symbol;
                    btn.onclick = () => placeNumber(index + 1);
                    pad.appendChild(btn);
                });
            } else {
                // For 9x9 and 4x4, show regular numbers
                for (let i = 1; i <= gridSize; i++) {
                    const btn = document.createElement('button');
                    btn.className = 'number-btn';
                    btn.textContent = i;
                    btn.onclick = () => placeNumber(i);
                    pad.appendChild(btn);
                }
            }
        }

        function placeNumber(num) {
            if (!selectedCell) return;
            const { row, col } = selectedCell;
            if (puzzle[row][col] !== 0) return;
            
            userGrid[row][col] = num;
            const cells = document.querySelectorAll('.sudoku-cell');
            const index = row * gridSize + col;
            cells[index].textContent = gridSize === 16 ? symbols16[num - 1] : num;
            cells[index].classList.remove('incorrect');
            
            if (checkComplete()) {
                setTimeout(() => {
                    document.getElementById('victoryModal').style.display = 'flex';
                }, 300);
            }
        }

        function clearCell() {
            if (!selectedCell) return;
            const { row, col } = selectedCell;
            if (puzzle[row][col] !== 0) return;
            
            userGrid[row][col] = 0;
            const cells = document.querySelectorAll('.sudoku-cell');
            const index = row * gridSize + col;
            cells[index].textContent = '';
            cells[index].classList.remove('incorrect');
        }

        function checkSolution() {
            let allCorrect = true;
            const cells = document.querySelectorAll('.sudoku-cell');
            
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    if (puzzle[i][j] === 0 && userGrid[i][j] !== 0) {
                        const index = i * gridSize + j;
                        // Check if placement is valid according to Sudoku-X rules
                        if (!isValidPlacement(userGrid, i, j, userGrid[i][j])) {
                            cells[index].classList.add('incorrect');
                            allCorrect = false;
                        } else {
                            cells[index].classList.remove('incorrect');
                        }
                    }
                }
            }
            
            if (allCorrect && checkComplete()) {
                setTimeout(() => {
                    document.getElementById('victoryModal').style.display = 'flex';
                }, 300);
            }
        }

        function checkComplete() {
            // Check if all cells are filled
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    if (userGrid[i][j] === 0) return false;
                }
            }
            
            // Check if all placements are valid
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    if (!isValidPlacement(userGrid, i, j, userGrid[i][j])) {
                        return false;
                    }
                }
            }
            
            return true;
        }

        function resetGame() {
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    if (puzzle[i][j] === 0) {
                        userGrid[i][j] = 0;
                    }
                }
            }
            selectedCell = null;
            renderGrid();
        }
    </script>
</body>
</html>